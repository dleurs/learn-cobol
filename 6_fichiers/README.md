1. 

```
ENVIRONMENT DIVISION.
*--------------------
INPUT-OUTPUT SECTION.
FILE-CONTROL.
    SELECT PRINT-LINE ASSIGN TO PRTLINE.
    SELECT ACCT-REC   ASSIGN TO ACCTREC.
```

2. 
```
DATA DIVISION.
*-------------
FILE SECTION.
FD  PRINT-LINE RECORDING MODE F.
01 PRINT-REC.
    ...

FD  ACCT-REC RECORDING MODE F.
01 ACCT-FIELDS.
    ... 
```

3. 
```
PROCEDURE DIVISION.
*------------------
OPEN-FILES.
    OPEN INPUT ACCT-REC.
    OPEN OUTPUT PRINT-LINE.
```
4. Iterate thought the file 
```
READ-RECORD.
    READ ACCT-REC
    AT END
        MOVE 'Y' TO LASTREC
    END-READ.

... 

READ-NEXT-RECORD.
    PERFORM READ-RECORD
    PERFORM UNTIL LASTREC = 'Y'
            PERFORM IS-STATE-VIRGINIA
            PERFORM WRITE-RECORD
            PERFORM READ-RECORD
    END-PERFORM
    .
```

5. JCL
```
//ACCTREC   DD DSN=&SYSUID..DATA,DISP=SHR
//PRTLINE   DD SYSOUT=*,OUTLIM=15000
```



